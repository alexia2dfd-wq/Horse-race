<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <style>
        body {
            background: black;
            overflow: hidden;
            margin: 0;
        }
    </style>
</head>
<body>
    <canvas id="can"></canvas>
    <script>

        async function getNumbers() {
            //const url = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vSEjPHuR3fbAJKtG27oyiY5swVxPsSMip3AuF5nHqtkh8WGJ6sXWe0M-24YlKnqtQrHYMd-vOLQSVPN/pubhtml?gid=1305247922&single=true&output=csv';
            const url = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRzLS1sOX_csa-Z0AoS4aWJ-4zA2kkeKo1X2rnbCHgqXaoWy26WvYKuAdpFt3DHie3BZ53l4Vk1Uh9t/pub?gid=0&single=true&output=csv'

            // >>> https://docs.google.com/spreadsheets/d/1z0Y-71-G4g_PQgt6foISZBKFVm42-3hmEObNexuOh2w/edit?pli=1&gid=0#gid=0

            const response = await fetch(url);
            const text = await response.text();

            const rows = text.trim().split('\n');

            const selectedColumns = rows.map(row => {
                const columns = row.split(',');
                return [columns[0], columns[1], columns[2]]; // B and C (0-based index)
            });

            drawChart(selectedColumns)
        }

        getNumbers();


        c = document.getElementById('can')
        ctx = c.getContext('2d')

        

        c.height = window.innerHeight
        c.width = window.innerWidth

        

        function drawChart(array) {
            ctx.fillStyle = '#ffb1b1';
            ctx.fillRect(0, 0, c.width, c.height);

            ctx.fillStyle = 'black';
            ctx.fillRect(c.width / 4, 0, 5, c.height);

            const maxValue = 200

            const chartWidth = c.width - c.width / 4;
            const dollarMultiplier = chartWidth / maxValue;

            const lineJump = chartWidth / 4;
            let linePos = lineJump;

            for (let i = 0; i < 4; i++) {
                ctx.fillRect(c.width / 4 + linePos, 0, 3, c.height);
                linePos += lineJump;
            }

            let position = 60;
            const jump = c.height / array.length;

            for (let i = 0; i < array.length; i++) {

                const label = array[i][0];
                const value = array[i][1];
                const color = array[i][2];

                const barWidth = value * dollarMultiplier;

                ctx.fillStyle = array[i][2];
                ctx.font = "40px Arial";
                ctx.textBaseline = "middle";
                ctx.fillText(label, 10, position);

                ctx.fillStyle = color;
                ctx.fillRect(c.width / 4, position - 15, barWidth, 30);

                position += jump;
            }
        }

    </script>
</body>
</html>
